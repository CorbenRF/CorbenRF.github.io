(function(){var t={9213:function(t,e,r){"use strict";var a=r(9963),o=r(6252);const l={class:"header container"},s={class:"header__wrapper"},i=(0,o._)("span",{class:"header__info"},"Каталог",-1),c=(0,o._)("a",{class:"header__logo",href:"#"},[(0,o._)("img",{src:"img/svg/logo-moire.svg",alt:"Логотип интернет магазина Moire",width:"116",height:"34"})],-1),n=(0,o._)("a",{class:"header__tel",href:"tel:8 800 600 90 09"}," 8 800 600 90 09 ",-1),d=(0,o.uE)('<footer class="footer container"><div class="footer__wrapper"><ul class="footer__links"><li><a class="footer__link" href="#"> Каталог </a></li><li><a class="footer__link" href="tel:88006009009"> 8 800 600 90 09 </a></li><li><a class="footer__link" href="mailto:hi@technozavrrr.com"> hi@technozavrrr.com </a></li><li><a class="footer__link" href="#"> Распродажа </a></li><li><a class="footer__link footer__link--medium" href="#"> Заказать звонок </a></li></ul><ul class="footer__social social"><li class="social__item"><a class="social__link" href="#" aria-label="Вконтакте"><svg width="20" height="11" fill="currentColor"><use xlink:href="#icon-vk"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Инстаграм"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-insta"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Facebook"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-facebook"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Twitter"><svg width="17" height="14" fill="currentColor"><use xlink:href="#icon-twitter"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Telegram"><svg width="19" height="17" fill="currentColor"><use xlink:href="#icon-telegram"></use></svg></a></li></ul><p class="footer__desc"> Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. </p><ul class="footer__data"><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Политика конфиденциальности </a></li><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Публичная оферта </a></li></ul><span class="footer__copyright"> © 2020 Moire </span></div></footer>',1);function u(t,e,r,a,u,_){const p=(0,o.up)("CartIndicator"),m=(0,o.up)("RouterView");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("header",l,[(0,o._)("div",s,[i,c,n,(0,o.Wm)(p)])]),(0,o.Wm)(m),d])}var _=r(3907),p=r(3577);const m=(0,o._)("svg",{width:"19",height:"24"},[(0,o._)("use",{"xlink:href":"#icon-cart"})],-1),g={class:"header__count","aria-label":"Количество товаров"};function h(t,e,r,a,l,s){const i=(0,o.up)("RouterLink");return(0,o.wg)(),(0,o.j4)(i,{class:"header__cart",to:{name:"cart"},"aria-label":"Корзина с товарами"},{default:(0,o.w5)((()=>[m,(0,o._)("span",g,(0,p.zw)(t.$store.state.cartProducts.length),1)])),_:1})}var f={},v=r(3744);const b=(0,v.Z)(f,[["render",h]]);var y=b,k={components:{CartIndicator:y},created(){const t=localStorage.getItem("userAccessKey");t&&this.updateUserAccessKey(t),this.loadCart()},methods:{...(0,_.nv)(["loadCart"]),...(0,_.OI)(["updateUserAccessKey"])}};const w=(0,v.Z)(k,[["render",u]]);var I=w;const P={messageOne:"Hello world",messageTwo:"Hello Vue"};var D=P,C=r(2201);const z={class:"preloader-4",style:{position:"absolute",top:"50%",left:"50%","z-index":"1000"}},T=(0,o._)("div",null,null,-1),U=(0,o._)("div",null,null,-1),L=(0,o._)("div",null,null,-1),F=(0,o._)("div",null,null,-1),x=(0,o._)("div",null,null,-1),$=(0,o._)("div",null,null,-1),A=(0,o._)("div",null,null,-1),K=(0,o._)("div",null,null,-1),S=(0,o._)("div",null,null,-1),M=[T,U,L,F,x,$,A,K,S],Z={class:"content__top"},O={class:"breadcrumbs"},V={class:"breadcrumbs__item"},W={class:"breadcrumbs__item"},E=(0,o._)("li",{class:"breadcrumbs__item"},[(0,o._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),H=(0,o._)("h1",{class:"content__title"}," Корзина ",-1),q={class:"content__info"},Y={class:"cart"},j={class:"cart__field"},R={class:"cart__data"},B={class:"cart__options"},G=(0,o._)("h3",{class:"cart__title"},"Доставка",-1),N={class:"cart__options options"},J={class:"options__item"},Q={class:"options__label"},X=["value"],tt={class:"options__value"},et=(0,o._)("h3",{class:"cart__title"},"Оплата",-1),rt={class:"cart__options options"},at={class:"options__item"},ot={class:"options__label"},lt=["value"],st={class:"options__value"},it={class:"cart__block"},ct={class:"cart__orders"},nt={key:0},dt={class:"cart__total"},ut=(0,o._)("button",{class:"cart__button button button--primery",type:"submit"}," Оформить заказ ",-1),_t={key:0,class:"cart__error form__error-block"},pt=(0,o._)("h4",null,"Заявка не отправлена!",-1);function mt(t,e,r,l,s,i){const c=(0,o.up)("RouterLink"),n=(0,o.up)("BaseFormText"),d=(0,o.up)("BaseFormTextarea");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.wy)((0,o._)("main",z,M,512),[[a.F8,s.productLoading]]),(0,o._)("main",{class:(0,p.C_)(["content container",{gray:s.productLoading}])},[(0,o._)("div",Z,[(0,o._)("ul",O,[(0,o._)("li",V,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",W,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Корзина ")])),_:1})]),E]),H,(0,o._)("span",q,(0,p.zw)(t.products.length)+" товар"+(0,p.zw)(t.grammar(t.products.length)),1)]),(0,o._)("section",Y,[(0,o._)("form",{class:"cart__form form",action:"#",method:"POST",onSubmit:e[7]||(e[7]=(0,a.iM)(((...t)=>i.order&&i.order(...t)),["prevent"]))},[(0,o._)("div",j,[(0,o._)("div",R,[(0,o.Wm)(n,{value:s.formData.name,"onUpdate:value":e[0]||(e[0]=t=>s.formData.name=t),error:s.formError.name,type:"text",title:"ФИО",placeholder:"Введите ваше полное имя"},null,8,["value","error"]),(0,o.Wm)(n,{value:s.formData.address,"onUpdate:value":e[1]||(e[1]=t=>s.formData.address=t),error:s.formError.address,type:"text",title:"Адрес доставки",placeholder:"Введите ваш адрес"},null,8,["value","error"]),(0,o.Wm)(n,{value:s.formData.phone,"onUpdate:value":e[2]||(e[2]=t=>s.formData.phone=t),error:s.formError.phone,type:"tel",title:"Телефон",placeholder:"Введите ваш телефон"},null,8,["value","error"]),(0,o.Wm)(n,{value:s.formData.email,"onUpdate:value":e[3]||(e[3]=t=>s.formData.email=t),error:s.formError.email,type:"tel",title:"Email",placeholder:"Введите ваш Email"},null,8,["value","error"]),(0,o.Wm)(d,{value:s.formData.comment,"onUpdate:value":e[4]||(e[4]=t=>s.formData.comment=t),title:"Комментарий к заказу",error:s.formError.comment,placeholder:"Ваши пожелания"},null,8,["value","error"])]),(0,o._)("div",B,[G,(0,o._)("ul",N,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.deliveryOptions,(t=>((0,o.wg)(),(0,o.iD)("li",J,[(0,o._)("label",Q,[(0,o.wy)((0,o._)("input",{class:"options__radio sr-only",type:"radio",name:"delivery",value:{price:t.price,type:t.id,title:t.title},"onUpdate:modelValue":e[5]||(e[5]=t=>s.deliveryInfo=t)},null,8,X),[[a.G2,s.deliveryInfo,void 0,{number:!0}]]),(0,o._)("span",tt,[(0,o.Uk)((0,p.zw)(t.title)+" ",1),(0,o._)("b",null,(0,p.zw)(0==t.price?"Бесплатно":t.price+"₽"),1)])])])))),256))]),et,(0,o._)("ul",rt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.paymentOptions,(t=>((0,o.wg)(),(0,o.iD)("li",at,[(0,o._)("label",ot,[(0,o.wy)((0,o._)("input",{class:"options__radio sr-only",type:"radio",name:"pay",value:t,"onUpdate:modelValue":e[6]||(e[6]=t=>i.paymentInfo=t),required:""},null,8,lt),[[a.G2,i.paymentInfo]]),(0,o._)("span",st,(0,p.zw)(t.title),1)])])))),256))])])]),(0,o._)("div",it,[(0,o._)("ul",ct,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.products,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"cart__order",key:t.productId},[(0,o._)("h3",null,[(0,o.Uk)((0,p.zw)(t.product.title)+" ",1),t.amount>0?((0,o.wg)(),(0,o.iD)("h3",nt,"x "+(0,p.zw)(t.amount),1)):(0,o.kq)("",!0)]),(0,o._)("b",null,(0,p.zw)((t.product.price*t.amount).toLocaleString())+" ₽",1),(0,o._)("span",null,"Артикул: "+(0,p.zw)(t.product.id),1)])))),128))]),(0,o._)("div",dt,[(0,o._)("p",null,[(0,o.Uk)("Доставка: "),(0,o._)("b",null,(0,p.zw)(0==s.deliveryInfo.price?"Бесплатно":s.deliveryInfo.price+"₽"),1)]),(0,o._)("p",null,[(0,o.Uk)("Итого: "),(0,o._)("b",null,(0,p.zw)(t.products.length),1),(0,o.Uk)(" товар"+(0,p.zw)(t.grammar(t.products.length))+" на сумму ",1),(0,o._)("b",null,(0,p.zw)((t.totalPrice+Number(s.deliveryInfo.price)).toLocaleString())+" ₽",1)])]),ut]),s.formErrorMessage?((0,o.wg)(),(0,o.iD)("div",_t,[pt,(0,o._)("p",null,(0,p.zw)(s.formErrorMessage),1)])):(0,o.kq)("",!0)],32)])],2)],64)}r(7658);const gt=["type","placeholder"];function ht(t,e,r,l,s,i){const c=(0,o.up)("BaseFormField");return(0,o.wg)(),(0,o.j4)(c,{title:t.title,error:t.error},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("input",{class:"form__input","onUpdate:modelValue":e[0]||(e[0]=e=>t.dataValue=e),type:r.type,placeholder:t.placeholder},null,8,gt),[[a.YZ,t.dataValue]])])),_:1},8,["title","error"])}const ft={class:"form__label"},vt={class:"form__value"},bt={key:0,class:"form__error"};function yt(t,e,r,a,l,s){return(0,o.wg)(),(0,o.iD)("label",ft,[(0,o.WI)(t.$slots,"default"),(0,o._)("span",vt,(0,p.zw)(r.title),1),r.error?((0,o.wg)(),(0,o.iD)("span",bt,(0,p.zw)(r.error),1)):(0,o.kq)("",!0)])}var kt={props:["title","error"]};const wt=(0,v.Z)(kt,[["render",yt]]);var It=wt,Pt={props:["title","error","placeholder","value"],components:{BaseFormField:It},computed:{dataValue:{get(){return this.value},set(t){this.$emit("update:value",t)}}}},Dt={props:["type"],mixins:[Pt]};const Ct=(0,v.Z)(Dt,[["render",ht]]);var zt=Ct;const Tt=["placeholder"];function Ut(t,e,r,l,s,i){const c=(0,o.up)("BaseFormField");return(0,o.wg)(),(0,o.j4)(c,{title:t.title,error:t.error},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("textarea",{class:"form__input form__input--area","onUpdate:modelValue":e[0]||(e[0]=e=>t.dataValue=e),placeholder:t.placeholder},null,8,Tt),[[a.nr,t.dataValue]])])),_:1},8,["title","error"])}var Lt={mixins:[Pt]};const Ft=(0,v.Z)(Lt,[["render",Ut]]);var xt=Ft;const $t={class:"cart__item product"},At={class:"product__pic"},Kt=["src","alt"],St={class:"product__title"},Mt={class:"product__info product__info--color"},Zt={class:"product__info-size"},Ot={class:"product__code"},Vt={class:"product__counter form__counter"},Wt=(0,o._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-minus"})],-1),Et=[Wt],Ht=(0,o._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-plus"})],-1),qt=[Ht],Yt={class:"product__price"},jt=(0,o._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-close"})],-1),Rt=[jt];function Bt(t,e,r,l,s,i){return(0,o.wg)(),(0,o.iD)("li",$t,[(0,o._)("div",At,[(0,o._)("img",{src:r.item.color.gallery?r.item.color.gallery[0].file.url:"./img/noimg.png",width:"120",height:"120",alt:r.item.product.title},null,8,Kt)]),(0,o._)("h3",St,(0,p.zw)(r.item.product.title),1),(0,o._)("p",Mt,[(0,o.Uk)(" Цвет: "),(0,o._)("span",null,[(0,o._)("i",{style:(0,p.j5)({"background-color":r.item.color.color.code})},null,4),(0,o.Uk)(" "+(0,p.zw)(r.item.color.color.title),1)])]),(0,o._)("p",Zt,[(0,o.Uk)(" Размер: "),(0,o._)("span",null,(0,p.zw)(r.item.size.title),1)]),(0,o._)("span",Ot," Артикул: "+(0,p.zw)(r.item.product.id),1),(0,o._)("div",Vt,[(0,o._)("button",{type:"button","aria-label":"Убрать один товар",onClick:e[0]||(e[0]=(...t)=>i.decrement&&i.decrement(...t))},Et),(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>i.amount=t),name:"count"},null,512),[[a.nr,i.amount,void 0,{number:!0}]]),(0,o._)("button",{type:"button","aria-label":"Добавить один товар",onClick:e[2]||(e[2]=(...t)=>i.increment&&i.increment(...t))},qt)]),(0,o._)("b",Yt,(0,p.zw)((r.item.amount*r.item.product.price).toLocaleString())+" ₽ ",1),(0,o._)("button",{class:"product__del button-del",type:"button","aria-label":"Удалить товар из корзины",onClick:e[3]||(e[3]=(0,a.iM)((t=>i.deleteProduct(r.item.productId)),["prevent"]))},Rt)])}var Gt={props:["item"],computed:{amount:{get(){return this.item.amount},set(t){this.$store.dispatch("updateCartProductAmount",{productId:this.item.productId,basketItemId:this.item.basketItemId,amount:t})}}},methods:{...(0,_.nv)(["deleteCartProduct"]),deleteProduct(){this.deleteCartProduct({id:this.item.basketItemId})},increment(){this.amount++},decrement(){this.amount>1&&this.amount--}}};const Nt=(0,v.Z)(Gt,[["render",Bt]]);var Jt=Nt,Qt={data(){return{productsLoading:!1,productsLoadingFailed:!1}},components:{CartItem:Jt},computed:{...(0,_.Se)({products:"cartDetailProducts",totalPrice:"cartTotalPrice"})},methods:{...(0,_.Se)({productsLoading:"productsLoading",productsLoadingFailed:"productsLoadingFailed"}),grammar(t){let e="";return e=1===t?"":[2,3,4].includes(t%10)?"а":"ов",e}}},Xt=r(8945);const te="https://vue-moire.skillbox.cc";var ee={mixins:[Qt],components:{BaseFormText:zt,BaseFormTextarea:xt},data(){return{productLoading:!1,formData:{},formError:{},deliveryInfo:{},paymentInfo:{},formErrorMessage:"",deliveryOptions:[],paymentOptions:[]}},computed:{paymentInfo(){return Xt.Z.get(`${te}/api/payments`,{params:{deliveryTypeId:this.deliveryInfo.type}}).then((t=>{this.paymentOptions=t.data,this.paymentInfo=t.data[0]}))}},methods:{order(){this.productLoading=!0,this.formError={},this.formErrorMessage="",clearTimeout(this.loadProductsTimer),this.loadProductsTimer=setTimeout((()=>{Xt.Z.post(`${te}/api/orders`,{...this.formData,deliveryTypeId:this.deliveryInfo.type,paymentTypeId:this.paymentInfo.id},{params:{userAccessKey:this.$store.state.userAccessKey}}).then((t=>{this.$store.commit("resetCart"),this.$store.commit("updateOrderInfo",t.data),this.$router.push({name:"orderInfo",params:{id:t.data.id}})})).catch((t=>{this.formError=t.response.data.error.request||{},this.formErrorMessage=t.response.data.error.message})).then((()=>this.productLoading=!1))}),1e3)}},created(){Xt.Z.get(`${te}/api/deliveries`).then((t=>{this.deliveryOptions=t.data,this.deliveryInfo={price:t.data[0].price,type:t.data[0].id,title:t.data[0].title}})).then((()=>{Xt.Z.get(`${te}/api/payments`,{params:{deliveryTypeId:this.deliveryInfo.type}}).then((t=>{this.paymentOptions=t.data,this.paymentInfo=t.data[0]}))}))}};const re=(0,v.Z)(ee,[["render",mt]]);var ae=re;const oe={class:"content container"},le={class:"content__top"},se={class:"breadcrumbs"},ie={class:"breadcrumbs__item"},ce={class:"breadcrumbs__item"},ne=(0,o._)("li",{class:"breadcrumbs__item"},[(0,o._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),de={class:"content__title"},ue={class:"cart"},_e={class:"cart__form form",action:"#",method:"POST"},pe={class:"cart__field"},me=(0,o._)("p",{class:"cart__message"}," Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ",-1),ge={class:"dictionary"},he={class:"dictionary__item"},fe=(0,o._)("span",{class:"dictionary__key"}," Получатель ",-1),ve={class:"dictionary__value"},be={class:"dictionary__item"},ye=(0,o._)("span",{class:"dictionary__key"}," Адрес доставки ",-1),ke={class:"dictionary__value"},we={class:"dictionary__item"},Ie=(0,o._)("span",{class:"dictionary__key"}," Телефон ",-1),Pe={class:"dictionary__value"},De={class:"dictionary__item"},Ce=(0,o._)("span",{class:"dictionary__key"}," Email ",-1),ze={class:"dictionary__value"},Te={class:"dictionary__item"},Ue=(0,o._)("span",{class:"dictionary__key"}," Способ оплаты ",-1),Le={class:"dictionary__value"},Fe={class:"cart__block"},xe={class:"cart__orders"},$e={class:"cart__order"},Ae={key:0},Ke={class:"cart__total"};function Se(t,e,r,a,l,s){const i=(0,o.up)("RouterLink");return(0,o.wg)(),(0,o.iD)("main",oe,[(0,o._)("div",le,[(0,o._)("ul",se,[(0,o._)("li",ie,[(0,o.Wm)(i,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",ce,[(0,o.Wm)(i,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Корзина ")])),_:1})]),ne]),(0,o._)("h1",de,[(0,o.Uk)(" Заказ оформлен "),(0,o._)("span",null,"№ "+(0,p.zw)(t.orderInfoPage.id),1)])]),(0,o._)("section",ue,[(0,o._)("form",_e,[(0,o._)("div",pe,[me,(0,o._)("ul",ge,[(0,o._)("li",he,[fe,(0,o._)("span",ve,(0,p.zw)(t.orderInfoPage.name),1)]),(0,o._)("li",be,[ye,(0,o._)("span",ke,(0,p.zw)(t.orderInfoPage.address),1)]),(0,o._)("li",we,[Ie,(0,o._)("span",Pe,(0,p.zw)(t.orderInfoPage.phone),1)]),(0,o._)("li",De,[Ce,(0,o._)("span",ze,(0,p.zw)(t.orderInfoPage.email),1)]),(0,o._)("li",Te,[Ue,(0,o._)("span",Le,(0,p.zw)(t.orderInfoPage.paymentType),1)])])]),(0,o._)("div",Fe,[(0,o._)("ul",xe,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.orderInfoPage.basket.items,(t=>((0,o.wg)(),(0,o.iD)("li",$e,[(0,o._)("h3",null,[(0,o.Uk)((0,p.zw)(t.product.title)+" ",1),t.quantity>0?((0,o.wg)(),(0,o.iD)("h3",Ae,"x "+(0,p.zw)(t.quantity),1)):(0,o.kq)("",!0)]),(0,o._)("b",null,(0,p.zw)(t.price.toLocaleString())+" ₽",1),(0,o._)("span",null,"Артикул: "+(0,p.zw)(t.product.id),1)])))),256))]),(0,o._)("div",Ke,[(0,o._)("p",null,[(0,o.Uk)("Доставка: "),(0,o._)("b",null,(0,p.zw)(0==t.orderInfoPage.deliveryType.price?"Бесплатно":t.orderInfoPage.deliveryType.price+"₽"),1)]),(0,o._)("p",null,[(0,o.Uk)("Итого: "),(0,o._)("b",null,(0,p.zw)(t.orderInfoPage.basket.items.length),1),(0,o.Uk)(" товар"+(0,p.zw)(t.grammar(t.orderInfoPage.basket.items.length))+" на сумму ",1),(0,o._)("b",null,(0,p.zw)(t.orderInfoPage.totalPrice.toLocaleString())+" ₽",1)])])])])])])}var Me={data(){return{}},mixins:[Qt],computed:{...(0,_.Se)({orderInfoPage:"orderDetailRequest"})},created(){this.$store.state.orderInfo&&this.$store.state.orderInfo.id===this.$route.params.id||this.$store.dispatch("loadOrderInfo",this.$route.params.id)}};const Ze=(0,v.Z)(Me,[["render",Se]]);var Oe=Ze;const Ve={class:"content container"},We={class:"content__top content__top--catalog"},Ee=(0,o._)("h1",{class:"content__title"}," Каталог ",-1),He={class:"content__info"},qe={class:"content__catalog"},Ye={class:"catalog"},je={key:0,class:"preloader-4"},Re=(0,o._)("div",null,null,-1),Be=(0,o._)("div",null,null,-1),Ge=(0,o._)("div",null,null,-1),Ne=(0,o._)("div",null,null,-1),Je=(0,o._)("div",null,null,-1),Qe=(0,o._)("div",null,null,-1),Xe=(0,o._)("div",null,null,-1),tr=(0,o._)("div",null,null,-1),er=(0,o._)("div",null,null,-1),rr=[Re,Be,Ge,Ne,Je,Qe,Xe,tr,er],ar={key:1};function or(t,e,r,l,s,i){const c=(0,o.up)("ProductFilter"),n=(0,o.up)("ProductList"),d=(0,o.up)("BasePagination");return(0,o.wg)(),(0,o.iD)("main",Ve,[(0,o._)("div",We,[Ee,(0,o._)("span",He,(0,p.zw)(i.countProducts)+" товар"+(0,p.zw)(t.grammar(i.countProducts)),1)]),(0,o._)("div",qe,[(0,o.Wm)(c,{priceFrom:s.filterPriceFrom,"onUpdate:priceFrom":e[0]||(e[0]=t=>s.filterPriceFrom=t),priceTo:s.filterPriceTo,"onUpdate:priceTo":e[1]||(e[1]=t=>s.filterPriceTo=t),categoryId:s.filterCategoryId,"onUpdate:categoryId":e[2]||(e[2]=t=>s.filterCategoryId=t),categoryIdModifiers:{number:!0},color:s.filterColorIds,"onUpdate:color":e[3]||(e[3]=t=>s.filterColorIds=t),material:s.filterMaterialIds,"onUpdate:material":e[4]||(e[4]=t=>s.filterMaterialIds=t),season:s.filterSeasonIds,"onUpdate:season":e[5]||(e[5]=t=>s.filterSeasonIds=t),products:i.products},null,8,["priceFrom","priceTo","categoryId","color","material","season","products"]),(0,o._)("section",Ye,[s.productsLoading?((0,o.wg)(),(0,o.iD)("div",je,rr)):(0,o.kq)("",!0),s.productsLoadingFailed?((0,o.wg)(),(0,o.iD)("div",ar,[(0,o.Uk)("Произошла ошибка при загрузке товаров. Попробуйте позднее "),(0,o._)("button",{onClick:e[6]||(e[6]=(0,a.iM)(((...t)=>i.loadProducts&&i.loadProducts(...t)),["prevent"]))},"Попробовать еще раз")])):((0,o.wg)(),(0,o.j4)(n,{key:2,products:i.products,onGotoPage:e[7]||(e[7]=(e,r)=>t.$emit("gotoPage",e,r))},null,8,["products"])),(0,o.Wm)(d,{page:s.page,count:i.countProducts,"per-page":s.productsPerPage,onPaginate:e[8]||(e[8]=t=>s.page=t)},null,8,["page","count","per-page"])])])])}const lr={class:"catalog__list"};function sr(t,e,r,a,l,s){const i=(0,o.up)("ProductItem");return(0,o.wg)(),(0,o.iD)("ul",lr,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.products,(r=>((0,o.wg)(),(0,o.iD)("li",{class:"catalog__item",key:r.id},[(0,o.Wm)(i,{product:r,onGotoPage:e[0]||(e[0]=(e,r)=>t.$emit("gotoPage",e,r))},null,8,["product"])])))),128))])}const ir=["src","alt"],cr={class:"catalog__title"},nr={href:"#"},dr={class:"catalog__price"},ur={class:"colors colors--black"},_r={class:"colors__label"},pr=["checked","value"];function mr(t,e,r,l,s,i){const c=(0,o.up)("RouterLink");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(c,{class:"catalog__pic",href:"#",to:{name:"product",params:{id:r.product.id}}},{default:(0,o.w5)((()=>[(0,o._)("img",{src:s.color.url,alt:r.product.title},null,8,ir)])),_:1},8,["to"]),(0,o._)("h3",cr,[(0,o._)("a",nr,(0,p.zw)(r.product.title),1)]),(0,o._)("span",dr,(0,p.zw)(r.product.price.toLocaleString())+" ₽ ",1),(0,o._)("ul",ur,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.product.colors.entries(),(([t,l])=>((0,o.wg)(),(0,o.iD)("li",{class:"colors__item",key:r.product.id},[(0,o._)("label",_r,[(0,o.wy)((0,o._)("input",{class:"colors__radio sr-only",type:"radio",checked:0===t,value:{name:l.color.title,url:l.gallery?l.gallery[0].file.url:"./img/noimg.png"},"onUpdate:modelValue":e[0]||(e[0]=t=>s.color=t)},null,8,pr),[[a.G2,s.color]]),(0,o._)("span",{class:"colors__value",style:(0,p.j5)({"background-color":l.color.code})},null,4)])])))),128))])],64)}var gr={data(){return{color:{name:this.product.colors[0].color.title,url:this.product.colors[0].gallery?this.product.colors[0].gallery[0].file.url:"./img/noimg.png"},image:""}},emits:["gotoPage"],props:["product"]};const hr=(0,v.Z)(gr,[["render",mr]]);var fr=hr,vr={props:["products"],components:{ProductItem:fr}};const br=(0,v.Z)(vr,[["render",sr]]);var yr=br;const kr={class:"catalog__pagination pagination"},wr={class:"pagination__item"},Ir=["disabled"],Pr=(0,o._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-arrow-left"})],-1),Dr=[Pr],Cr=["onClick"],zr={class:"pagination__item"},Tr=["disabled"],Ur=(0,o._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-arrow-right"})],-1),Lr=[Ur];function Fr(t,e,r,l,s,i){return(0,o.wg)(),(0,o.iD)("ul",kr,[(0,o._)("li",wr,[(0,o._)("a",{href:"#",class:(0,p.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":1==r.page}]),onClick:e[0]||(e[0]=(0,a.iM)((t=>i.paginate(--r.page)),["prevent"])),disabled:1==r.page,"aria-label":"Предыдущая страница"},Dr,10,Ir)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.pages,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"pagination__item",key:t},[(0,o._)("a",{href:"#",class:(0,p.C_)(["pagination__link",{"pagination__link--current":t===r.page}]),onClick:(0,a.iM)((e=>i.paginate(t)),["prevent"])},(0,p.zw)(t),11,Cr)])))),128)),(0,o._)("li",zr,[(0,o._)("a",{class:(0,p.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":r.page==i.pages}]),href:"#","aria-label":"Следующая страница",onClick:e[1]||(e[1]=(0,a.iM)((t=>i.paginate(++r.page)),["prevent"])),disabled:r.page==i.pages},Lr,10,Tr)])])}var xr={props:["page","count","perPage"],computed:{pages(){return Math.ceil(this.count/this.perPage)}},methods:{paginate(t){console.log("Page changed to",t),this.$emit("paginate",t)}}};const $r=(0,v.Z)(xr,[["render",Fr]]);var Ar=$r;const Kr={class:"filter"},Sr={class:"form__block"},Mr=(0,o._)("legend",{class:"form__legend"},"Цена",-1),Zr={class:"form__label form__label--price"},Or=(0,o._)("span",{class:"form__value"},"От",-1),Vr={class:"form__label form__label--price"},Wr=(0,o._)("span",{class:"form__value"},"До",-1),Er={class:"form__block"},Hr=(0,o._)("legend",{class:"form__legend"},"Категория",-1),qr={class:"form__label form__label--select"},Yr=(0,o._)("option",{value:"0"},"Все категории",-1),jr=["value"],Rr={class:"form__block"},Br=(0,o._)("legend",{class:"form__legend"},"Цвет",-1),Gr={class:"colors colors--black"},Nr={class:"colors__label"},Jr=["name","value"],Qr={class:"form__block"},Xr=(0,o._)("legend",{class:"form__legend"},"Материал",-1),ta={class:"check-list"},ea={class:"check-list__label"},ra=["name","value"],aa=["value"],oa={class:"form__block"},la=(0,o._)("legend",{class:"form__legend"},"Коллекция",-1),sa={class:"check-list"},ia={class:"check-list__label"},ca=["value"],na=["value"],da=(0,o._)("button",{class:"filter__submit button button--primery",type:"submit"}," Применить ",-1);function ua(t,e,r,l,s,i){return(0,o.wg)(),(0,o.iD)("aside",Kr,[(0,o._)("form",{class:"filter__form form",action:"#",method:"get",onSubmit:e[7]||(e[7]=(0,a.iM)(((...t)=>i.submit&&i.submit(...t)),["prevent"]))},[(0,o._)("fieldset",Sr,[Mr,(0,o._)("label",Zr,[(0,o.wy)((0,o._)("input",{class:"form__input",type:"text",name:"min-price","onUpdate:modelValue":e[0]||(e[0]=t=>s.currentPriceFrom=t)},null,512),[[a.nr,s.currentPriceFrom,void 0,{number:!0}]]),Or]),(0,o._)("label",Vr,[(0,o.wy)((0,o._)("input",{class:"form__input",type:"text",name:"max-price","onUpdate:modelValue":e[1]||(e[1]=t=>s.currentPriceTo=t)},null,512),[[a.nr,s.currentPriceTo,void 0,{number:!0}]]),Wr])]),(0,o._)("fieldset",Er,[Hr,(0,o._)("label",qr,[(0,o.wy)((0,o._)("select",{class:"form__select",name:"category","onUpdate:modelValue":e[2]||(e[2]=t=>s.currentCategoryId=t)},[Yr,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.categories,(t=>((0,o.wg)(),(0,o.iD)("option",{value:t.id,key:t.id},(0,p.zw)(t.title),9,jr)))),128))],512),[[a.bM,s.currentCategoryId]])])]),(0,o._)("fieldset",Rr,[Br,(0,o._)("ul",Gr,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.colorsList,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"colors__item",key:t.id},[(0,o._)("label",Nr,[(0,o.wy)((0,o._)("input",{class:"colors__radio sr-only",type:"checkbox",name:t.title,value:t.id,"onUpdate:modelValue":e[3]||(e[3]=t=>s.currentColor=t)},null,8,Jr),[[a.e8,s.currentColor]]),(0,o._)("span",{class:"colors__value",style:(0,p.j5)({"background-color":t.code})},null,4)])])))),128))])]),(0,o._)("fieldset",Qr,[Xr,(0,o._)("ul",ta,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.materialsList,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"check-list__item",key:t.id},[(0,o._)("label",ea,[(0,o.wy)((0,o._)("input",{class:"check-list__check sr-only",type:"checkbox",name:t.title,value:t.id,"onUpdate:modelValue":e[4]||(e[4]=t=>s.currentMaterial=t)},null,8,ra),[[a.e8,s.currentMaterial]]),(0,o._)("span",{class:"check-list__desc",value:t.id},(0,p.zw)(t.title),9,aa),(0,o._)("span",null,"("+(0,p.zw)(t.productsCount)+")",1)])])))),128))])]),(0,o._)("fieldset",oa,[la,(0,o._)("ul",sa,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.seasonsList,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"check-list__item",key:t.id},[(0,o._)("label",ia,[(0,o.wy)((0,o._)("input",{class:"check-list__check sr-only",type:"checkbox",name:"collection",value:t.id,"onUpdate:modelValue":e[5]||(e[5]=t=>s.currentSeason=t)},null,8,ca),[[a.e8,s.currentSeason]]),(0,o._)("span",{class:"check-list__desc",value:t.id},(0,p.zw)(t.title),9,na),(0,o._)("span",null,"("+(0,p.zw)(t.productsCount)+")",1)])])))),128))])]),da,i.flagFilter?((0,o.wg)(),(0,o.iD)("button",{key:0,class:"filter__reset button button--second",type:"button",onClick:e[6]||(e[6]=(0,a.iM)(((...t)=>i.reset&&i.reset(...t)),["prevent"]))}," Сбросить ")):(0,o.kq)("",!0)],32)])}var _a={data(){return{currentPriceFrom:0,currentPriceTo:0,currentCategoryId:0,currentColor:[],currentMaterial:[],currentSeason:[],categoriesData:null,colorsData:null,materialsData:null,seasonsData:null}},props:["priceFrom","priceTo","categoryId","color","material","season"],computed:{categories(){return this.categoriesData?this.categoriesData.items:[]},colorsList(){return this.colorsData?this.colorsData.items:[]},materialsList(){return this.materialsData?this.materialsData.items:[]},seasonsList(){return this.seasonsData?this.seasonsData.items:[]},flagFilter(){return this.currentPriceFrom>0||this.currentPriceTo>0||this.currentCategoryId>0||this.currentColor.length>0||this.currentMaterial.length>0||this.currentSeason.length>0}},watch:{priceFrom(t){this.currentPriceFrom=t},priceTo(t){this.currentPriceTo=t},categoryId(t){this.currentCategoryId=t},color(t){this.currentColor=t},material(t){this.currentMaterial=t},season(t){this.currentSeason=t}},methods:{submit(){this.$emit("update:priceFrom",this.currentPriceFrom),this.$emit("update:priceTo",this.currentPriceTo),this.$emit("update:categoryId",this.currentCategoryId),this.$emit("update:color",this.currentColor),this.$emit("update:material",this.currentMaterial),this.$emit("update:season",this.currentSeason)},reset(){this.$emit("update:priceFrom",0),this.$emit("update:priceTo",0),this.$emit("update:categoryId",0),this.$emit("update:color",[]),this.$emit("update:material",[]),this.$emit("update:season",[])},loadCategories(){Xt.Z.get(`${te}/api/productCategories`).then((t=>this.categoriesData=t.data))},loadColors(){Xt.Z.get(`${te}/api/colors`).then((t=>this.colorsData=t.data))},loadMaterials(){Xt.Z.get(`${te}/api/materials`).then((t=>this.materialsData=t.data))},loadSeasons(){Xt.Z.get(`${te}/api/seasons`).then((t=>this.seasonsData=t.data))}},created(){this.loadCategories(),this.loadColors(),this.loadMaterials(),this.loadSeasons()}};const pa=(0,v.Z)(_a,[["render",ua]]);var ma=pa,ga={methods:{grammar(t){let e="";return e=1===t?"":[2,3,4].includes(t%10)?"а":"ов",e}}},ha={components:{ProductList:yr,BasePagination:Ar,ProductFilter:ma},data(){return{filterPriceFrom:0,filterPriceTo:0,filterCategoryId:0,filterColorIds:[],filterMaterialIds:[],filterSeasonIds:[],page:1,productsPerPage:6,productsData:null,productsLoading:!1,productsLoadingFailed:!1}},emits:["gotoPage"],computed:{products(){return this.productsData?this.productsData.items.map((t=>({...t}))):[]},countProducts(){return this.productsData?this.productsData.pagination.total:0}},mixins:[ga],methods:{loadProducts(){this.productsLoading=!0,this.productsLoadingFailed=!1,clearTimeout(this.loadProductsTimer),this.loadProductsTimer=setTimeout((()=>{Xt.Z.get(`${te}/api/products`,{params:{page:this.page,limit:this.productsPerPage,categoryId:this.filterCategoryId,colorIds:this.filterColorIds,materialIds:this.filterMaterialIds,seasonIds:this.filterSeasonIds,minPrice:this.filterPriceFrom,maxPrice:this.filterPriceTo}}).then((t=>this.productsData=t.data)).catch((()=>this.productsLoadingFailed=!0)).then((()=>this.productsLoading=!1))}),200)}},watch:{page(){this.loadProducts()},filterPriceFrom(){this.loadProducts()},filterPriceTo(){this.loadProducts()},filterCategoryId(){this.loadProducts()},filterMaterialIds(){this.loadProducts()},filterSeasonIds(){this.loadProducts()},filterColorIds(){this.loadProducts()}},created(){this.loadProducts()}};const fa=(0,v.Z)(ha,[["render",or]]);var va=fa;function ba(t,e,r,a,l,s){return(0,o.wg)(),(0,o.iD)("h1",null,"Page not found")}var ya={};const ka=(0,v.Z)(ya,[["render",ba]]);var wa=ka;const Ia={key:0,class:"preloader-4"},Pa=(0,o._)("div",null,null,-1),Da=(0,o._)("div",null,null,-1),Ca=(0,o._)("div",null,null,-1),za=(0,o._)("div",null,null,-1),Ta=(0,o._)("div",null,null,-1),Ua=(0,o._)("div",null,null,-1),La=(0,o._)("div",null,null,-1),Fa=(0,o._)("div",null,null,-1),xa=(0,o._)("div",null,null,-1),$a=[Pa,Da,Ca,za,Ta,Ua,La,Fa,xa],Aa={key:1,class:"content container"},Ka={key:2,class:"content container"},Sa={class:"content__top"},Ma={class:"breadcrumbs"},Za={class:"breadcrumbs__item"},Oa={class:"breadcrumbs__item"},Va={class:"breadcrumbs__item"},Wa={class:"breadcrumbs__link"},Ea={class:"item"},Ha={class:"item__pics pics"},qa={class:"pics__wrapper"},Ya=["src","alt"],ja={class:"pics__list"},Ra={class:"pics__item"},Ba=["onClick"],Ga=["src"],Na={class:"item__info"},Ja={class:"item__code"},Qa={class:"item__title"},Xa={class:"item__form"},to={class:"item__row item__row--center"},eo={class:"form__counter"},ro=(0,o._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-minus"})],-1),ao=[ro],oo=(0,o._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-plus"})],-1),lo=[oo],so={class:"item__price"},io={class:"item__row"},co={class:"form__block"},no=(0,o._)("legend",{class:"form__legend"},"Цвет:",-1),uo={class:"colors colors--black"},_o={class:"colors__label"},po=["value"],mo={key:0,class:"form__block"},go=(0,o._)("legend",{class:"form__legend"},"Размер",-1),ho={class:"form__label form__label--small form__label--select"},fo=(0,o._)("option",{disabled:"",value:""},"Выберите размер...",-1),vo=["value"],bo={key:0,class:"preloader-4"},yo=(0,o._)("div",null,null,-1),ko=(0,o._)("div",null,null,-1),wo=(0,o._)("div",null,null,-1),Io=(0,o._)("div",null,null,-1),Po=(0,o._)("div",null,null,-1),Do=(0,o._)("div",null,null,-1),Co=(0,o._)("div",null,null,-1),zo=(0,o._)("div",null,null,-1),To=(0,o._)("div",null,null,-1),Uo=[yo,ko,wo,Io,Po,Do,Co,zo,To],Lo={key:1,class:"button button--primery",type:"submit"},Fo={class:"item__desc"},xo={class:"tabs"},$o={class:"tabs__item"},Ao={class:"tabs__item"},Ko={key:0,class:"item__content"},So=(0,o.uE)("<h3>Состав:</h3><p> 60% хлопок<br> 30% полиэстер<br></p><h3>Уход:</h3><p> Машинная стирка при макс. 30ºC короткий отжим<br> Гладить при макс. 110ºC<br> Не использовать машинную сушку<br> Отбеливать запрещено<br> Не подвергать химчистке<br></p>",4),Mo=[So],Zo={key:1,class:"item__content"},Oo=(0,o._)("h3",null,"Доставка:",-1),Vo=(0,o._)("p",null,[(0,o.Uk)(" 1. Курьерская доставка по Москве и Московской области – 290 ₽"),(0,o._)("br"),(0,o.Uk)(" 2.Самовывоз из магазина. Список и адреса магазинов Вы можете посмотреть здесь"),(0,o._)("br")],-1),Wo=(0,o._)("h3",null,"Возврат:",-1),Eo=(0,o._)("p",null,[(0,o.Uk)(" Любой возврат должен быть осуществлен в течение Возвраты в магазине БЕСПЛАТНО."),(0,o._)("br"),(0,o.Uk)(" Вы можете вернуть товары в любой магазин. Магазин должен быть расположен в стране, в которой Вы осуществили покупку. БЕСПЛАТНЫЙ возврат в Пункт выдачи заказов."),(0,o._)("br"),(0,o.Uk)(" Для того чтобы вернуть товар в одном из наших Пунктов выдачи заказов, позвоните по телефону 8 800 600 90 09"),(0,o._)("br")],-1),Ho=[Oo,Vo,Wo,Eo];function qo(t,e,r,l,s,i){const c=(0,o.up)("RouterLink");return s.productLoading?((0,o.wg)(),(0,o.iD)("main",Ia,$a)):s.productData?((0,o.wg)(),(0,o.iD)("main",Ka,[(0,o._)("div",Sa,[(0,o._)("ul",Ma,[(0,o._)("li",Za,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",Oa,[(0,o.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,p.zw)(i.category.title),1)])),_:1})]),(0,o._)("li",Va,[(0,o._)("a",Wa,(0,p.zw)(i.product.title),1)])])]),(0,o._)("section",Ea,[(0,o._)("div",Ha,[(0,o._)("div",qa,[(0,o._)("img",{width:"570",height:"570",src:i.displayImg,alt:i.product.title},null,8,Ya)]),(0,o._)("ul",ja,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.product.colors.entries(),(([t,e])=>((0,o.wg)(),(0,o.iD)("li",Ra,[(0,o._)("a",{class:(0,p.C_)(["pics__link",{"pics__link--current":s.chosenColor.index==t}]),onClick:r=>s.chosenColor={name:e.color.title,url:e.gallery?e.gallery[0].file.url:"./img/noimg.png",index:t,id:e.color.id}},[(0,o._)("img",{width:"98",height:"98",src:e.gallery?e.gallery[0].file.url:"./img/noimg.png",alt:"Название товара"},null,8,Ga)],10,Ba)])))),256))])]),(0,o._)("div",Na,[(0,o._)("span",Ja,"Артикул: "+(0,p.zw)(i.product.id),1),(0,o._)("h2",Qa,(0,p.zw)(i.product.title),1),(0,o._)("div",Xa,[(0,o._)("form",{class:"form",action:"#",method:"POST",onSubmit:e[5]||(e[5]=(0,a.iM)(((...t)=>i.addToCart&&i.addToCart(...t)),["prevent"]))},[(0,o._)("div",to,[(0,o._)("div",eo,[(0,o._)("button",{type:"button","aria-label":"Убрать один товар",onClick:e[0]||(e[0]=(...t)=>i.decrement&&i.decrement(...t))},ao),(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>this.productAmount=t)},null,512),[[a.nr,this.productAmount,void 0,{number:!0}]]),(0,o._)("button",{type:"button","aria-label":"Добавить один товар",onClick:e[2]||(e[2]=(...t)=>i.increment&&i.increment(...t))},lo)]),(0,o._)("b",so,(0,p.zw)(i.product.price.toLocaleString())+" ₽ ",1)]),(0,o._)("div",io,[(0,o._)("fieldset",co,[no,(0,o._)("ul",uo,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.product.colors.entries(),(([t,r])=>((0,o.wg)(),(0,o.iD)("li",{class:"colors__item",key:i.product.id},[(0,o._)("label",_o,[(0,o.wy)((0,o._)("input",{class:"colors__radio sr-only",type:"radio",value:{name:r.color.title,url:r.gallery?r.gallery[0].file.url:"./img/noimg.png",index:t,id:r.color.id},"onUpdate:modelValue":e[3]||(e[3]=t=>s.chosenColor=t)},null,8,po),[[a.G2,s.chosenColor]]),(0,o._)("span",{class:"colors__value",style:(0,p.j5)({"background-color":r.color.code})},null,4)])])))),128))])]),i.product.sizes?((0,o.wg)(),(0,o.iD)("fieldset",mo,[go,(0,o._)("label",ho,[(0,o.wy)((0,o._)("select",{class:"form__select",name:"category","onUpdate:modelValue":e[4]||(e[4]=t=>s.chosenSize=t),required:""},[fo,(0,o.Uk)(" /* empty option as per vue docs for iOs compatibility */ "),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.product.sizes,(t=>((0,o.wg)(),(0,o.iD)("option",{value:t.id},(0,p.zw)(t.title),9,vo)))),256))],512),[[a.bM,s.chosenSize]])])])):(0,o.kq)("",!0)]),s.productAddSending?((0,o.wg)(),(0,o.iD)("div",bo,Uo)):((0,o.wg)(),(0,o.iD)("button",Lo," В корзину ")),(0,o.wy)((0,o._)("div",null,"Товар добавлен в корзину",512),[[a.F8,s.productAdded]])],32)])]),(0,o._)("div",Fo,[(0,o._)("ul",xo,[(0,o._)("li",$o,[(0,o._)("a",{class:(0,p.C_)(["tabs__link",{"tabs__link--current":0==s.activeTab}]),onClick:e[6]||(e[6]=(0,a.iM)((t=>i.setAcitveTab(0,t)),["prevent"]))}," Информация о товаре ",2)]),(0,o._)("li",Ao,[(0,o._)("a",{class:(0,p.C_)(["tabs__link",{"tabs__link--current":1==s.activeTab}]),onClick:e[7]||(e[7]=(0,a.iM)((t=>i.setAcitveTab(1,t)),["prevent"]))}," Доставка и возврат ",2)])]),s.activeTab?((0,o.wg)(),(0,o.iD)("div",Zo,Ho)):((0,o.wg)(),(0,o.iD)("div",Ko,Mo))])])])):((0,o.wg)(),(0,o.iD)("main",Aa,"Не удалось загрузить товар"))}var Yo={data(){return{productAmount:1,productData:null,productLoading:!1,productLoadingFailed:!1,productAdded:!1,productAddSending:!1,chosenColor:{},chosenSize:"",activeTab:0}},computed:{product(){return this.productData},category(){return this.productData.category},displayImg(){return this.chosenColor.url}},methods:{...(0,_.nv)(["addProductToCart"]),addToCart(){this.productAdded=!1,this.productAddSending=!0,this.addProductToCart({productId:this.product.id,colorId:this.chosenColor.id,sizeId:this.chosenSize,amount:this.productAmount}).then((()=>{this.productAdded=!0,this.productAddSending=!1}))},increment(){this.productAmount++},decrement(){this.productAmount>0&&this.productAmount--},loadProduct(){this.productLoading=!0,this.productLoadingFailed=!1,clearTimeout(this.loadProductsTimer),this.loadProductsTimer=setTimeout((()=>{Xt.Z.get(`${te}/api/products/${this.$route.params.id}`).then((t=>{this.productData=t.data,this.chosenColor={name:t.data.colors[0].color.title,url:t.data.colors[0].gallery?t.data.colors[0].gallery[0].file.url:"./img/noimg.png",index:0,id:t.data.colors[0].color.id}})).catch((t=>{this.productLoadingFailed=!0,console.log(t)})).then((()=>this.productLoading=!1))}),100)},setAcitveTab(t){this.activeTab=t}},created(){this.loadProduct()},beforeRouteUpdate(){this.loadProduct()}};const jo=(0,v.Z)(Yo,[["render",qo]]);var Ro=jo;const Bo={key:0,class:"preloader-4"},Go=(0,o._)("div",null,null,-1),No=(0,o._)("div",null,null,-1),Jo=(0,o._)("div",null,null,-1),Qo=(0,o._)("div",null,null,-1),Xo=(0,o._)("div",null,null,-1),tl=(0,o._)("div",null,null,-1),el=(0,o._)("div",null,null,-1),rl=(0,o._)("div",null,null,-1),al=(0,o._)("div",null,null,-1),ol=[Go,No,Jo,Qo,Xo,tl,el,rl,al],ll={key:1,class:"content container"},sl={key:2,class:"content container"},il={class:"content__top"},cl={class:"breadcrumbs"},nl={class:"breadcrumbs__item"},dl={class:"breadcrumbs__item"},ul=(0,o._)("h1",{class:"content__title"}," Корзина ",-1),_l={class:"content__info"},pl={class:"cart"},ml={class:"cart__form form",action:"#",method:"POST"},gl={class:"cart__field"},hl={class:"cart__list"},fl={class:"cart__block"},vl=(0,o._)("p",{class:"cart__desc"}," Мы посчитаем стоимость доставки на следующем этапе ",-1),bl={class:"cart__price"};function yl(t,e,r,a,l,s){const i=(0,o.up)("RouterLink"),c=(0,o.up)("CartItem");return t.productsLoading?((0,o.wg)(),(0,o.iD)("main",Bo,ol)):t.productsLoadingFailed?((0,o.wg)(),(0,o.iD)("main",ll,"Не удалось загрузить корзину")):((0,o.wg)(),(0,o.iD)("main",sl,[(0,o._)("div",il,[(0,o._)("ul",cl,[(0,o._)("li",nl,[(0,o.Wm)(i,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Каталог ")])),_:1})]),(0,o._)("li",dl,[(0,o.Wm)(i,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,o.w5)((()=>[(0,o.Uk)(" Корзина ")])),_:1})])]),ul,(0,o._)("span",_l,(0,p.zw)(t.products.length)+" товар"+(0,p.zw)(t.grammar(t.products.length)),1)]),(0,o._)("section",pl,[(0,o._)("form",ml,[(0,o._)("div",gl,[(0,o._)("ul",hl,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.products,(t=>((0,o.wg)(),(0,o.j4)(c,{key:t.productId,item:t},null,8,["item"])))),128))])]),(0,o._)("div",fl,[vl,(0,o._)("p",bl,[(0,o.Uk)(" Итого: "),(0,o._)("span",null,(0,p.zw)(t.totalPrice.toLocaleString())+" ₽",1)]),t.products.length>0?((0,o.wg)(),(0,o.j4)(i,{key:0,tag:"button",to:{name:"order"},class:"cart__button button button--primery",type:"submit"},{default:(0,o.w5)((()=>[(0,o.Uk)(" Оформить заказ ")])),_:1})):(0,o.kq)("",!0)])])])]))}var kl={mixins:[Qt]};const wl=(0,v.Z)(kl,[["render",yl]]);var Il=wl,Pl=r(3076),Dl=r.n(Pl);const Cl=[{name:"main",component:va,path:"/"},{name:"product",component:Ro,path:"/product/:id"},{name:"cart",component:Il,path:"/cart"},{name:"order",component:ae,path:"/order"},{name:"orderInfo",component:Oe,path:"/order/:id"},{name:"notFound",component:wa,path:"/:pathMatch(.*)"}],zl=(0,C.p7)({history:(0,C.r5)(Dl().publicPath),routes:Cl});var Tl=zl;const Ul=(0,_.MT)({state:{cartProducts:[],userAccessKey:null,cartProductsData:[],orderInfo:null,productsLoading:!1,productsLoadingFailed:!1},mutations:{updateOrderInfo(t,e){t.orderInfo=e},resetCart(t){t.cartProducts=[],t.cartProductsData=[]},updateCartProductAmount(t,{productId:e,basketItemId:r,amount:a}){const o=t.cartProducts.find((t=>t.basketItemId===r));console.log("update result: ",o),o&&(o.amount=a)},deleteCartProduct(t,{productId:e,basketItemId:r}){t.cartProducts=t.cartProducts.filter((t=>t.basketItemId!==r))},updateUserAccessKey(t,e){t.userAccessKey=e},updatecartProductsData(t,e){t.cartProductsData=e},syncCartProducts(t){t.cartProducts=t.cartProductsData.map((t=>({productId:t.product.id,amount:t.quantity,basketItemId:t.id,color:t.color,size:t.size})))}},getters:{cartDetailProducts(t){return t.cartProducts.map((e=>{const{product:r}=t.cartProductsData.find((t=>t.product.id===e.productId));return{...e,product:{...r,image:r.colors[0].gallery?r.colors[0].gallery[0].file.url:"",basketItemId:e.id}}}))},cartTotalPrice(t,e){return e.cartDetailProducts.reduce(((t,e)=>e.product.price*e.amount+t),0)},orderDetailRequest(t){return t.orderInfo}},actions:{loadOrderInfo(t,e){return Xt.Z.get(`${te}/api/orders/${e}`,{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateOrderInfo",e.data)}))},loadCart(t){return this.productsLoading=!0,this.productsLoadingFailed=!1,Xt.Z.get(`${te}/api/baskets`,{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.state.userAccessKey&&t.state.userAccessKey===e.data.user.accessKey||(console.log("user access key",e.data.user.accessKey),localStorage.setItem("userAccessKey",e.data.user.accessKey),t.commit("updateUserAccessKey",e.data.user.accessKey)),t.commit("updatecartProductsData",e.data.items),t.commit("syncCartProducts")})).catch((()=>this.productsLoadingFailed=!0)).then((()=>this.productsLoading=!1))},addProductToCart(t,{productId:e,colorId:r,sizeId:a,amount:o}){return new Promise((t=>setTimeout(t,1e3))).then((()=>Xt.Z.post(`${te}/api/baskets/products`,{productId:e,colorId:r,sizeId:a,quantity:o},{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updatecartProductsData",e.data.items),t.commit("syncCartProducts")}))))},updateCartProductAmount(t,{productId:e,basketItemId:r,amount:a}){if(t.commit("updateCartProductAmount",{productId:e,basketItemId:r,amount:a}),!(a<1))return Xt.Z.put(`${te}/api/baskets/products`,{basketItemId:r,quantity:a},{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updatecartProductsData",e.data.items)})).catch((()=>{t.commit("syncCartProducts")}))},deleteCartProduct(t,{id:e}){return console.log("delete basket item id: ",e),Xt.Z["delete"](`${te}/api/baskets/products`,{params:{userAccessKey:t.state.userAccessKey},data:{basketItemId:e}}).then((e=>{t.commit("updatecartProductsData",e.data.items),t.commit("syncCartProducts")})).catch((()=>{t.commit("syncCartProducts")}))}},watch:{productsLoading(){return this.productsLoading},productsLoadingFailed(){return this.productsLoadingFailed}}});var Ll=Ul;const Fl=(0,a.ri)(I);Fl.use(Tl),Fl.use(Ll),Fl.mount("#app"),console.log(D.messageOne)},3076:function(t){t.exports={publicPath:"/"}}},e={};function r(a){var o=e[a];if(void 0!==o)return o.exports;var l=e[a]={exports:{}};return t[a](l,l.exports,r),l.exports}r.m=t,function(){var t=[];r.O=function(e,a,o,l){if(!a){var s=1/0;for(d=0;d<t.length;d++){a=t[d][0],o=t[d][1],l=t[d][2];for(var i=!0,c=0;c<a.length;c++)(!1&l||s>=l)&&Object.keys(r.O).every((function(t){return r.O[t](a[c])}))?a.splice(c--,1):(i=!1,l<s&&(s=l));if(i){t.splice(d--,1);var n=o();void 0!==n&&(e=n)}}return e}l=l||0;for(var d=t.length;d>0&&t[d-1][2]>l;d--)t[d]=t[d-1];t[d]=[a,o,l]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,a){var o,l,s=a[0],i=a[1],c=a[2],n=0;if(s.some((function(e){return 0!==t[e]}))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(c)var d=c(r)}for(e&&e(a);n<s.length;n++)l=s[n],r.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return r.O(d)},a=self["webpackChunkskillbox"]=self["webpackChunkskillbox"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(9213)}));a=r.O(a)})();
//# sourceMappingURL=app.e5e164d1.js.map